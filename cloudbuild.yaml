timeout: 30m
steps:
- name: gcr.io/cloud-builders/docker
  args: ['pull', 'gcr.io/${PROJECT_ID}/diffbind']
- name: gcr.io/cloud-builders/docker
  args: ['build', '--cache-from', 'gcr.io/${PROJECT_ID}/diffbind', '-t', 'gcr.io/${PROJECT_ID}/diffbind', '.']
- name: gcr.io/cloud-builders/docker
  args: ['build', '-t', 'gcr.io/${PROJECT_ID}/diffbind:${SHORT_SHA}', '.']
images:
- gcr.io/${PROJECT_ID}/diffbind
- gcr.io/${PROJECT_ID}/diffbind:${SHORT_SHA}
